#The Missing Handbook
## DIS Background

Distributed Interactive Simulation (DIS) is along, with High Level Architecture (HLA) and Test and Training Enabling Architecture (TENA), one of the three main standards for exachanging state information in military simulations. Despite its widespread use, the background and theory of DIS is scattered across many documents at many locations, or is known only to practioners on the basis of experience and lore. Those using DIS can read the IEEE standard itself, but the standards documents aims for precision rather than providing a broad and understandable overview. Even the standard itself does not always capture what goes on in deployed applications; implementors have made pragmatic implementation decisions where the standard is unclear or silent. Even if the IEEE standard is clear there's often no explaination of why the standard chose to do things the way it did; usually it is not the place of the standard to explain the reasons behind the implementation choices it made. Implementors of simulations may make choices about DIS as well. The implementations of DIS features by practioners and its unmentioned theoretical foundation also makes it difficult for newcomers to understand. One has to find the right person with the right knowledge, and he has to be available and willing to answer questions.  

There's no centralized place to learn about DIS and its use in applications. This document is intended to be an open source and community maintained introduction to DIS--both its supporting theory, and the practical implementation and configuration choices by technicians who run simulations.

Often the people who find they need to learn something about DIS are programmers who are thrown head-first into the problem. They're given some vague instructions, usually summed up as "Hey, we need to implement DIS in our application. Go make it work." Sometimes the programmers don't have prior experience with distributed simulations or virutal worlds. They often work on the project for a few weeks before moving on to something else, so they need to learn about the subject quickly. They're OK with coding, and often with network programming, but using DIS often involves implementations of the problem domain that are not clear to newcomers. For example, one would think that it is easy to direct an object in a virtual world to move one meter northwest. This is tricker than it may seem at first glance. What coordinate system is being used, and is that using metric or imperial units? How does one uniquely select an object so that it and it alone moves? Learning about each of these tasks can take a programmer days to unravel if he must rely on only the IEEE standard.

Another audience for this document is military or support personnel responsible for making existing DIS simulations work. They usually have good understanding of the military problem domain and perhaps the basics of networking and software installation. While they are subject matter experts in the military aspects of the simulation, they may not be familiar with the nuts and bolts of how the simulation protocol works. A basic understanding of how things are done in DIS is often a great help in getting a simulation to work in a realistic way. 

Those using simulations that instead of DIS use HLA or TENA also can benefit from this document. The HLA Realtime Platform Reference Federation Object Model (RPR-FOM) uses many of the concepts from DIS, and so does TENA. Understanding DIS helps HLA RPR-FOM and TENA practioners as well, and very often RPR-FOM simulations also communicate with DIS via a protocol gateway. 

Studying the standard in isolation can be confusing if the reader has no familiarity with the problems inherent to distributed simulations. The IEEE standards document does not usually explain the "why" of how it choose to solve the problems it did, or even that the problems it solves are in fact problems. This document includes an overview of distributed simulations and the inherent issues faced when implementing them. In order to explain the issues, background information on distributed simulations and virtual worlds is presented. If you already know all this, you can safely skip it. But for most programmers and administrators it provides the context for features or data in DIS that may seem mysterious at first. 

DIS consists of a few dozen standardized network messages exchanged between simulations. Understanding the syntax of these messages and how to create and receive them is the easy part of using DIS. A deeper understanding of what the semantic content of the messages are, and what problems they are trying to solve, is more difficult and more valuable.

If you just want to sling some code and skip all the throat-clearing, you can start reading the "Protocol Data Units: Exchanging State Information" section. DIS standardizes the format of network messages and has no formal programming API. What is standardized is the format of packets on the wire; the code implementation that puts them into that format is up to the user. This means that if you compare two different DIS vendor libraries the code may look different, and have different language class names and methods. The examples in this document use the open-dis DIS project, available at https://github.org/open-dis. The open-dis project has DIS library implementations in Java, C++, Javascript, Python, C#, and Objective-C, along with sample applications. There are other implementations of DIS, both open source and commercial. There are also many home-grown implementations of the standard. This means that the code-slingers out there will see differences in the source code of two applications that do the same thing.

## History

DIS arose from a Defense Advanced Research Agency (DARPA) project in the 1980's called SIMNET. At the time TCP/IP and high speed networks were just getting their legs, computers were becoming powerful enough to do the compuation, and 3D graphics was in its infancy. Individual simulators of the era sometimes had displays that replicated a soldier's view of the battlefield, but they weren't networked with each other. Each simulator worked in isolation, and an aircraft simulator couldn't see a tank controlled by another simulator. The idea of SIMNET, quite advanced for the time, was to create a virtual, shared battlefield in which all participants on multiple computers could see and interact with each other. SIMNET's major advance--it was arguably the first large real-time distirubted virtual world--was to serve as a basis for the research that allowed this to happen. 

A screen capture from an early SIMNET application is shown below:

<img src="images/SimnetDisplay.jpg"/>

Each participant is in a simulator that controls one tank, and each tank views the shared virutal battlefield. All the vehicles interact in the same shared enviroment. If one simulator causes the tank it controls to move, the other partipants see the movement, in real time, in a shared environment. Networked first person shooter games like Call of Duty do this routinely today.  At the time the concept of a shared, networked environment was revolutionary.

There are several parts to the concept: graphics, networking, and the semantics and format of the messages exchanged.

The graphics portion of the shared virutal world is a subject unto itself because of the complex nature of graphics. The art that portrays the shared environment may vary depending on the training objects. Some applications can use 2D maps to portray a shared environment if map displays are appropriate for the audience being trained; an implementor may be able to use Google Maps or Open Street Maps. Alternatively we can use 3D graphics in a manner reminescent of modern First Person Shooter (FPS) games. There are many ways to draw the 3D images we see on the screen, from OpenGL and Direct3D to higher level scene graphs, such as OpenInventor or X3D. At a high level of abstraction objects can be rendered with the aid of a 3D game engine such as Lumberyard or Unity. A DIS application may have rudimentary 3D graphics instead of photorealistic 3D graphics, depending on the training use. Again, the audience being trained may benefit from high quality graphics, or still be well trained by a graphics system that is simple but effective.

Computer graphics is a large and complex subject, and instruction or examples often depend on the graphics standard chosen to describe the environment. We will discuss some graphics implementations for both for 2D maps and 3D applications.

Before the distributed simulation application can be implemented there needed to be a way to exchange *state information* between simulators. State information includes data about a participant in the simulation. In the case of a tank, the state information may include its position, the direction the vehicle is facing, how fast it is moving, whether it is on fire, and which way the turret is pointing. It's this state information and the format that it is exchanged in that DIS standardizes. Once the state information is exchanged the graphics components we just described above can be used to draw the scene that the users see. 

DARPA projects are intended to transition out of the incubator research phase and into useful implementations that add value to the military. SIMNET, which started as a DARPA project, worked out many of the state information exchange issues that were needed to create a real-time networked virtual environment. Once that was done it needed to be standardized and refined outside of the domain of DARPA. The group that would eventually become the Simulation Interoperability Standards Group (SISO) took over development of the network protocol portion of the project, which they renamed DIS, in a series of workshops held from 1989 to 1996.  Once the protocol was developed they took the information to the IEEE standards group for approval.

It is in the government's interest to have simulators interoperate with each other, and in particular to prevent vendor lock-in. If the protocol for exchanging state information is owned by a company and that company can prevent simulator competitors from entering the market, or charge more to make their simulators interoperate with those from other companies. To be useful the DIS protocol had to be a *standard*. Simply providing a language implementation that did the job without also specifying what was being exchanged was inadequate. So SISO refined the SIMNET network protocol and developed a formal description of it, then took it to the IEEE, where it was approved as an international standard (IEEE-1278.1). From that point on anyone could buy the IEEE standard document and then write their own implementation of the protocol.

As is inevitable with these things, the standard has to be maintained and updated in light of experience and new technology. From the late 80's until about 1995 the DARPA SIMNET protocol was used; this predated the adoption of DIS as an IEEE standard. The first major release of a standard DIS was DIS version 5, in 1995. It was updated with  version 6, in 1998, when a few new network messages were added.  Version 7 was adopted in 2012, and version 7 maintained almost complete backwards compatiblity to the DIS version 5 of 1995. At the same time it added a few new PDUs (network messages) related to directed energy weapons and also clarified the semantics of protocol. SISO continues to support and update DIS in working groups, today in parallel with the HLA RPR-FOM. 

## Terminology

There's a question of what to call applications similar to those described above, and academics love to have arguments about terminology. "Virtual world" or "virtual environment" were  the early names for the class of application. A virtual world aims for a replication of a real world combined with a sense of immersion, and that requires high fidelity, responsive graphics. Developers can integrate other human senses into the virtual world application, such as haptics (touch), audio, or even smell to increase the feeling of presence.

Some of the early implementations ran on a single, large computer that had several graphical displays attached to it, while other implementations ran on multiple computers connected by a network.  "Networked Virtual Environment (NVE) is a more precise description of the applications that run on multiple hosts.

First Person Shooter (FPS) games use essentially the same technoloy as the NVEs used by the military, and must deal with the same implementation issues that we will discuss later. The primary difference between military simulation NVEs and games is the application's use, not the technology. Military simulations are intended for training and analysis, while the games are written to entertain customers. Even if the technology is fundamentally the same, a game used in a military context can result in negative training for the users--for example, by making a user think that he will be invulnerable to rifle fire if he ducks behind a sheetrock wall. That behavior may be fun in a game, but it doesn't reflect reality and trains the military to act in a dangerous way.

The size of gaming/entertainment industry dwarfs that of the military simulation industry, and the games they sell are often more visually polished. A single top level game title may cost hundreds of millions to develop and market. The business models of the entertainment industray are different from those of the defense industry. The product life cycle of a game may be only a few years, while a military simulation may be in used for decades. What's more, an entertainment game developer is usually not interested in a standard network protocol. They consider vendor lock-in a feature, not a bug.

## Other Uses

DIS was originally intended for virtual environments but existence of a network protocol for exchanging state information was discovered to be useful in other ways. At its root, DIS describes the position of things in the world, and that capability can be used in applications other than NVEs. If we subtract the graphics element of the application or the need to  we're left with a description of the dynamic state of a battlefield. We can use this information for a variety of purposes, many of them analytic. 

Constructive simulations can control entities with Artificial Intelligence (AI), whether it be simple or complex, and those entities can use DIS to publish their positions. Applications can use this to create brigade, division, or even corps-sized simulated units that manuever on the battlefield. The position of the units can be visualized with 2D maps and that doesn't create a sense of presence for users that is expected in a virtual environment, but that's beside the point. That's not what those simulations are aiming to create.

Less often, DIS can be used to describe the position of live entities--real people or vehicles in the real world. Today GPS receivers and mobile wireless devices are cheap and in everyone's pocket. Live participants can send their position in DIS format and this information can be ingested into existing simulations. Live participants can be elements in existing computational or virtual simulations.

This can work in the other direction as well. Augmented reality is an emerging technology and has received enormous investments from large technology companies such as Microsoft, Google, and Facebook. It's probable that augmented reality applications will receive updates from constructive simulations running on mobile devices.

DIS is frequently used as "glue" to enable applications that use HLA or TENA to talk to each other. HLA has some virtues, but interoperablity between HLA applications is a challenge. It's usually easier to get two HLA applications that use RPR-FOM variants to talk to each other using DIS than via directly via HLA.

## Parting Thoughts

Given the technology of the era, the developers of DIS were visionary. Even decades after it was developed and standardized it still holds up quite well. The research it prompted was trailblazing, and served as the starting point for many military simulations and entertainment industry game applications. The ideas worked out in DIS are still widely used today.



## Further Reading

**Simulation Interoperabilty Standards Organization (SISO):** http://sisostds.org/<br>
**The IEEE DIS Standard, 1998 (Version 6):** https://standards.ieee.org/findstds/standard/1278.1a-1998.html<br>
**DIS Wikipedia:** https://en.wikipedia.org/wiki/Distributed_Interactive_Simulation<br>
**DIS Plain and Simple, another document that provides information about DIS:** https://www.sisostds.org/DigitalLibrary.aspx?Command=Core_Download&EntryId=29302<br>
**SIMNET wikipedia:** https://en.wikipedia.org/wiki/SIMNET<br>
**SIMNET History:** http://www.iitsec.org/about/awardsandrecognition/Documents/2015_FellowPaper_Miller.pdf<br>
**Still More SIMNET History:** http://www.dtic.mil/dtic/tr/fulltext/u2/a294786.pdf<br>
**A whole website devoted to SIMNET history:** http://simnet-history.org/<br>
**Networked Graphics: Building Networked Games and Virtual Environments**, Anthony Steed and Manuel Oliveira. https://www.amazon.com/Networked-Graphics-Building-Virtual-Environments/dp/0123744237